#!/usr/bin/perl

use Carp;

my $targetDir = $ARGV[0];

if (!$targetDir) {
   print "\nusage: wdkModelJavadoc targetDir\n\n";
   exit(1);
}

-e $targetDir && die "targetDir $targetDir already exists.  Please provide a non-existent targetDir.\n";

my $GUS_HOME=$ENV{GUS_HOME};

my $javaDir = "$GUS_HOME/lib/java";

opendir(DATADIR, $javaDir) || &confess ("Error:  Could not open $javaDir.  Please check the directory exists and try again.");

my $CLASSPATH = "";

while (my $nextFileName = readdir(DATADIR)){
    if ($nextFileName =~ /.*\.jar$/){
	$CLASSPATH .= "$javaDir/$nextFileName" . ":"
    }
}

my $cmd = "javadoc -d $targetDir -classpath $CLASSPATH -sourcepath $ENV{PROJECT_HOME}/WDK/Model/src/java -public org.gusdb.wdk.model org.gusdb.wdk.model.test org.gusdb.wdk.model.implementation org.gusdb.wdk.model.jspwrap";

system($cmd);

